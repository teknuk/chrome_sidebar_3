"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Frame=void 0;var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_react=require("react"),_react2=_interopRequireDefault(_react),_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),_glamor=require("glamor"),_propTypes=require("prop-types"),iframeClass=(0,_glamor.css)({border:"none",width:"100%",height:"100%",background:"white",borderRadius:"8px",boxShadow:"-1px 1px 8px rgba(0,0,0,.15)"}),maskClass=(0,_glamor.css)({display:"none",position:"fixed",width:"100%",height:"100%",top:0,left:0,cursor:"pointer",zIndex:"9999"}),maskVisibleClass=(0,_glamor.css)({display:"block"}),containerClass=(0,_glamor.css)({position:"fixed",top:"0px",right:"0px",height:"100%",width:"65%",maxWidth:"400px",padding:"8px",boxSizing:"border-box",transform:"translateX(100%)",transition:"transform .45s cubic-bezier(0, 0, 0.3, 1)",zIndex:1e4}),containerVisibleClass=(0,_glamor.css)({transform:"translate3d(0,0,0)"}),containerMinimizedClass=(0,_glamor.css)({cursor:"pointer",transform:"translateX(94%)",":hover":{transform:"translateX(92%)"},"& > iframe":{pointerEvents:"none"}}),FRAME_TOGGLE_FUNCTION="chromeIframeSheetToggle",Frame=exports.Frame=function(e){function t(){var e,r,n,a;_classCallCheck(this,t);for(var s=arguments.length,i=Array(s),o=0;o<s;o++)i[o]=arguments[o];return r=n=_possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n.state={isVisible:!1,isMinimized:!1},n.onLoad=function(){(0,n.props.onLoad)({mask:n.mask,frame:n.frame})},n.onMaskClick=function(){n.setState({isMinimized:!0})},n.onFrameClick=function(){n.setState({isMinimized:!1})},n.toggleFrame=function(){n.setState({isMinimized:!n.state.isMinimized})},a=r,_possibleConstructorReturn(n,a)}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e,t,r,n=this,a=this.state,s=a.isVisible,i=a.isMinimized,o=this.props,l=o.url,c=(o.className,o.maskClassName),p=o.maskStyle,u=o.containerClassName,m=o.containerStyle,f=o.iframeClassName,d=o.iframeStyle,_=o.children,y=o.containerChildren;return _react2.default.createElement("div",null,_react2.default.createElement("div",{className:(0,_classnames2.default)((e={},_defineProperty(e,maskClass,!0),_defineProperty(e,maskVisibleClass,!i),_defineProperty(e,c,!0),e)),style:p,onClick:this.onMaskClick,ref:function(e){return n.mask=e}}),_react2.default.createElement("div",{className:(0,_classnames2.default)((t={},_defineProperty(t,containerClass,!0),_defineProperty(t,containerVisibleClass,s),_defineProperty(t,containerMinimizedClass,i),_defineProperty(t,u,!0),t)),style:m,onClick:this.onFrameClick},_react2.default.createElement("iframe",{className:(0,_classnames2.default)((r={},_defineProperty(r,iframeClass,!0),_defineProperty(r,f,!0),r)),style:d,src:l,ref:function(e){return n.frame=e},onLoad:this.onLoad}),y),_)}},{key:"componentDidMount",value:function(){var e=this,t=this.props,r=t.delay,n=t.onMount;window[FRAME_TOGGLE_FUNCTION]=this.toggleFrame,n({mask:this.mask,frame:this.frame}),this._visibleRenderTimeout=setTimeout(function(){e.setState({isVisible:!0})},r)}},{key:"componentWillUnmount",value:function(){(0,this.props.onUnmount)({mask:this.mask,frame:this.frame}),delete window[FRAME_TOGGLE_FUNCTION],clearTimeout(this._visibleRenderTimeout)}}],[{key:"isReady",value:function(){return void 0!==window[FRAME_TOGGLE_FUNCTION]}},{key:"toggle",value:function(){window[FRAME_TOGGLE_FUNCTION]&&window[FRAME_TOGGLE_FUNCTION]()}}]),t}(_react.Component);Frame.defaultProps={url:"",delay:500,maskClassName:"",maskStyle:{},containerClassName:"",containerStyle:{},iframeClassName:"",iframeStyle:{},onMount:function(){},onUnmount:function(){},onLoad:function(){}},Frame.propTypes={url:_propTypes.string,delay:_propTypes.number,maskClassName:_propTypes.string,maskStyle:_propTypes.object,containerClassName:_propTypes.string,containerStyle:_propTypes.object,iframeClassName:_propTypes.string,iframeStyle:_propTypes.object,children:_propTypes.node,containerChildren:_propTypes.node,onMount:_propTypes.func,onUnmount:_propTypes.func,onLoad:_propTypes.func},exports.default=Frame;