"use strict";function attachHeadersListener(e){var r=e.webRequest,s=e.hosts,t=e.iframeHosts,a=e.overrideFrameOptions;if("string"!=typeof s){if(!s)throw new Error("`hosts` option must be a string or array");s=s.join(" ")}if("string"!=typeof t){if(!t)throw new Error("`iframeHosts` option must be a string or array");t=t.join(" ")}var i=["main_frame"];a&&i.push("sub_frame"),r.onHeadersReceived.addListener(function(e){return{responseHeaders:e.responseHeaders.map(function(e){var r=/content-security-policy/i.test(e.name),i=/x-frame-options/i.test(e.name);if(r){var n=e.value;n=n.replace("script-src","script-src "+s),n=n.replace("style-src","style-src "+s),n=n.replace("frame-src","frame-src "+t),n=n.replace("child-src","child-src "+s),a&&(n=n.replace(/frame-ancestors (.*?);/gi,"")),e.value=n}else i&&a&&(e.value="ALLOWALL");return e})}},{urls:["http://*/*","https://*/*"],types:i},["blocking","responseHeaders"])}Object.defineProperty(exports,"__esModule",{value:!0}),exports.attachHeadersListener=attachHeadersListener,exports.default={attachHeadersListener:attachHeadersListener};